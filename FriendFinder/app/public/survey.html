<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Survey</title>

  

   

    <!--Bootstrap-->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    
    
   <!--fonts-->
   <link href="https://fonts.googleapis.com/css?family=Gloria+Hallelujah|Permanent+Marker|Special+Elite&display=swap" rel="stylesheet">

    <!--CSS-->
    <link rel="stylesheet" href="assets/style.css"></link>
    
    <!--Jquery-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js" integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU=" crossorigin="anonymous"></script>
 
</head>

<body>

<!--Main header goes here, informing the user what the deal is-->

<div class="jumbotron ml-4 mr-4 mt-4" id="header-div">
        
    <h1 id="surveyTitle" class="display-4 text-center">Friend Finder Survey</h1>

    <br>
    
    <p id="surveyP" class="lead justify text-center"> enter your name, and a photo URL, then pick an answer between 1-5. When your done hit submit!</p>

</div>

<div class="card m-4" id="survey-div">

    <div class="card-header" id="survey-header">
        Friend Finder Survey!
    </div>

    <!--Test form-->
    <form class="needs-validation" novalidate name="form">

        <!--name-->
        
        <div class="col ml-2 mt-4 mb-4 form-group">
            <input type="text" class="form-control" placeholder="Name" id="name" name="name" required>
        </div>

        <hr class="ml-2 mr-2">

        <!--Photo?-->
        <!-- <div class="form-group m-2">
            <label for="photo">Upload your profile image</label>
            <input type="file" class="form-control-file" id="photoUpload" name='photo'>
        </div> -->

        <div class="col ml-2 mt-4 mb-4 form-group">
            <input type="text" class="form-control" placeholder="Profile Image URL" id="photoURL" name="photo" required>
        </div>


        <hr class="ml-2 mr-2">

        <!--Question 1-->
        <p class="pl-2 mt-2">#1</p>
        <div class="form-row align-items-center inline">
            
            <div class="col-auto my-1 form-group">  
              <label class="mr-sm-2 sr-only" for="inlineFormCustomSelect">Preference</label>
              <select class="custom-select mr-sm-2 ml-2 validate form-control" id="question1" name="q1" required>
                <option disabled="disabled" selected>Choose...</option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
              </select>
            </div>
            <p class=" ml-2 mb-2 text-sm-right surveyQuestion">I'm not easily bothered by things.</p>
        </div>

        <hr class="ml-2 mr-2">

        <!--Question 2-->
        <p class="pl-2 mt-2">#2</p>
        <div class="form-row align-items-center inline">
            
            <div class="col-auto my-1 form-group">  
              <label class="mr-sm-2 sr-only" for="inlineFormCustomSelect">Preference</label>
              <select class="custom-select mr-sm-2 ml-2 validate form-control" id="question2" name="q2" required>
                <option disabled="disabled" selected>Choose...</option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
              </select>
            </div>
            <p class=" ml-2 mb-2 text-sm-right surveyQuestion">I'm interested in computers.</p>
        </div>

        <hr class="ml-2 mr-2">

        <!--Question 3-->
        <p class="pl-2 mt-2">#3</p>
        <div class="form-row align-items-center inline">
            
            <div class="col-auto my-1 form-group">  
              <label class="mr-sm-2 sr-only" for="inlineFormCustomSelect">Preference</label>
              <select class="custom-select mr-sm-2 ml-2 validate  form-control" id="question3" name="q3" required>
                <option disabled="disabled" selected>Choose...</option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
              </select>
            </div>
            <p class=" ml-2 mb-2 text-sm-right surveyQuestion">Android is better than Apple.</p>
        </div>

        <hr class="ml-2 mr-2">

        <!--Question 4-->
        <p class="pl-2 mt-2">#4</p>
        <div class="form-row align-items-center inline">
            
            <div class="col-auto my-1 form-group">  
              <label class="mr-sm-2 sr-only" for="inlineFormCustomSelect">Preference</label>
              <select class="custom-select mr-sm-2 ml-2 validate form-control" id="question4" name="q4" required>
                <option disabled="disabled" selected>Choose...</option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
              </select>
            </div>
            <p class=" ml-2 mb-2 text-sm-right surveyQuestion">I make plans and stick to them.</p>
        </div>

        <hr class="ml-2 mr-2">

        <!--Question 5-->
        <p class="pl-2 mt-2">#5</p>
        <div class="form-row align-items-center inline">
            
            <div class="col-auto my-1 form-group">  
              <label class="mr-sm-2 sr-only" for="inlineFormCustomSelect">Preference</label>
              <select class="custom-select mr-sm-2 ml-2 validate form-control" id="question5" name="g5" required>
                <option disabled="disabled" selected>Choose...</option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
              </select>
            </div>
            <p class=" ml-2 mb-2 text-sm-right surveyQuestion">Cats are awesome...most of the time.</p>
        </div>

        <hr class="ml-2 mr-2">

        <!--Question 6-->
        <p class="pl-2 mt-2">#6</p>
        <div class="form-row align-items-center inline">
            
            <div class="col-auto my-1 form-group">  
              <label class="mr-sm-2 sr-only" for="inlineFormCustomSelect">Preference</label>
              <select class="custom-select mr-sm-2 ml-2 validate form-control" id="question6" name="q6" required>
                <option disabled="disabled" selected>Choose...</option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
              </select>
            </div>
            <p class=" ml-2 mb-2 text-sm-right surveyQuestion">I like the outdoors</p>
        </div>

        <hr class="ml-2 mr-2">

        <!--Question 7-->
        <p class="pl-2 mt-2">#7</p>
        <div class="form-row align-items-center inline">
            
            <div class="col-auto my-1 form-group">  
              <label class="mr-sm-2 sr-only" for="inlineFormCustomSelect">Preference</label>
              <select class="custom-select mr-sm-2 ml-2 validate form-control" id="question7" name="q7" required>
                <option disabled="disabled" selected>Choose...</option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
              </select>
            </div>
            <p class=" ml-2 mb-2 text-sm-right surveyQuestion">Bring on the snow!</p>
        </div>

        <hr class="ml-2 mr-2">

        <!--Question 8-->
        <p class="pl-2 mt-2">#8</p>
        <div class="form-row align-items-center inline">
            
            <div class="col-auto my-1 form-group">  
              <label class="mr-sm-2 sr-only" for="inlineFormCustomSelect">Preference</label>
              <select class="custom-select mr-sm-2 ml-2 validate form-control" id="question8" name="q8" required>
                <option disabled="disabled" selected>Choose...</option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
              </select>
            </div>
            <p class=" ml-2 mb-2 text-sm-right surveyQuestion">I'm more of a 'morning' person.</p>
        </div>

        <hr class="ml-2 mr-2">

        <!--Question 9-->
        <p class="pl-2 mt-2">#9</p>
        <div class="form-row align-items-center inline">
            
            <div class="col-auto my-1 form-group">  
              <label class="mr-sm-2 sr-only" for="inlineFormCustomSelect">Preference</label>
              <select class="custom-select mr-sm-2 ml-2 validate form-control" id="question9" name="q9" required>
                <option disabled="disabled" selected>Choose...</option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
              </select>
            </div>
            <p class=" ml-2 mb-2 text-sm-right surveyQuestion">I enjoy a good book over a movie any day.</p>
        </div>

        <hr class="ml-2 mr-2">

        <!--Question 10-->
            <p class="pl-2 mt-2">#10</p>
        <div class="form-row align-items-center inline">

            <div class="col-auto my-1 form-group">  
              <label class="mr-sm-2 sr-only" for="inlineFormCustomSelect">Preference</label>
              <select class="custom-select mr-sm-2 ml-2 validate form-control" id="question10" name="q10" required>
                <option disabled="disabled" selected>Choose...</option>
                <option value="1">1 (strongly disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (strongly agree)</option>
              </select>
            </div>
            <p class=" ml-2 mb-2 text-sm-right surveyQuestion">Night life is the life for me!</p>
        </div>

        <hr class="ml-2 mr-2">
        <!--Submit button for form-->
        <input type="submit" class="btn btn-primary m-4 float-right" id="submit" data-toggle="" data-target="">

    </form>



</div>

<!--Modal?-->
<!-- Modal (BS4) -->
<div class="modal fade" id="resultModal" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Best Match:</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <!--Survey Match/results get displayed here-->
        <h4 id="matchName"></h4>
        <img id="matchPhoto" src= "" width="200px"></img>

      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" id="takeItAgainBtn" data-dismiss="modal">Take the test again!</button>
        <a type="button" href="/" id="returnHomeInModal" class="btn btn-primary" >Return Home</a>
      </div>
    </div>
  </div>
</div>

<!--footer-->
<div class="footer m-4">
    <a href="/" class="float-left m-4" id="homeLink">Return Home</a>
</div>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</body>

</html>

<script>
  
    // JS code goes here for survey values and posting

    //Submit button JS
    $('#submit').on("click", function (event) {
        event.preventDefault();
        
        let q1 = $('#question1').val()
        let q2 = $('#question2').val()
        let q3 = $('#question3').val()
        let q4 = $('#question4').val()
        let q5 = $('#question5').val()
        let q6 = $('#question6').val()
        let q7 = $('#question7').val()
        let q8 = $('#question8').val()
        let q9 = $('#question9').val()
        let q10 = $('#question10').val()

        // Have to create my own validation because Bootstrap validation isnt working....
        // Validation ,IF no vlaues, alert. IF values entered create newFriend object, post to api, find match, and assign attr. to submit button to display modal.
        if ($('#name').val() === "" || $('#photoURL').val() === "" || q1 === "" || q2 === "" || q3 === "" || q4 === "" || q5 === "" || q6 === "" || q7 === "" || q8 === "" || q9 === "" || q10 === "") {
          alert("You need to fill out all the values and answer all the questions!");
        } else {

          $('#survey-div').fadeOut();
          // Create newFriend object and input values from survey
          let newFriend = {
            name: $('#name').val(),
            photo: $('#photoURL').val(),
            scores: [q1, q2, q3, q4, q5, q6, q7, q8, q9, q10]
          };
          // POST to 'api/friends', then use the response data (from JS code for finding match in 'apiRoutes.js') to display in modal
          $.post("/api/friends", newFriend).then(function(data) {
            console.log("survey.html", data);
            $("#matchName").text(data[0]);
            $("#matchPhoto").attr("src", data[1]);
          });

          // give these attr. to submit button to display modal IF values are entered.
          $('#submit').attr({
              "data-toggle":"modal",
               "data-target":"#resultModal"
        });

        };

    });

    // Retake test
    $('#takeItAgainBtn').on("click", function(){
      location.reload();
    });

    
    

</script>